<!DOCTYPE html>
<html lang="en" layout:decorate="~{layout}" xmlns:layout="https://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title layout:fragment="title">Post Genesis</title>
    <link href="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>
</head>
<div layout:fragment="content">
    <form class="flex flex-auto flex-col h-96" action="#" enctype="multipart/form-data" method="post" th:action="@{'/p/' + ${slug} + '/newPost'}">
        <h1 class="mt-20 font-trace text-center text-4xl text-indigo-500">Create a new post</h1>
        <div class="mt-10 flex flex-auto flex-col">
            <label class="text-green-400 text-center font-bold" for="title">Title</label>
            <input class="mt-3 w-[500px] text-purple-600 ml-auto mr-auto text-center" field="*{title}" id="title" name="title" placeholder="Title" required type="text">
        </div>
        <div class="flex flex-col flex-auto w-1/2 h-96 ml-auto mr-auto">
            <label class="mt-6 text-green-400 text-center font-bold" for="text">Text</label>
            <textarea
                    id="text"
                    name="text"></textarea>

            <div class="flex flex-auto flex-row mt-8 mb-8 justify-center">
                <label class="btn w-36 mr-3" for="image">Image</label>
                <input
                        class="hidden"
                        accept="image/*"
                        field="*{image}"
                        id="image"
                        name="image"
                        type="file">

                <label class="btn w-36 ml-3 mr-3" for="audio">Audio file</label>
                <input
                        class="hidden"
                        field="*{recording}"
                        hidden
                        id="recording"
                        name="recording"
                        onchange="test(this)"
                        type="text"
                        value="recording">
                <input class="btn w-36 text-green-400 ml-3" onclick="recordAudio(this, 'recording')" type="button" value="Record">
                <input
                        class="hidden"
                        accept="audio/*"
                        capture
                        id="audio"
                        name="audio"
                        onchange="play(this)"
                        type="file"
                        value="*{audio}">
            </div>
            <audio controls id="player"></audio>
            <input class="btn ml-auto mr-auto w-48 mt-8" type="submit" value="Create new post">
        </div>
    </form>
</div>
<div layout:fragment="editor" th:include="fragments/editor"></div>
</html>